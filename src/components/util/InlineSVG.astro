---
import { parse } from 'node-html-parser';

export interface Props {
  src: string;
}

interface SVGFile {
  default: string;
  file: string;
}

const { src, ...attributes } = Astro.props as Props;
const res = import.meta.glob("/src/**/*.svg", { eager: true, query: '?raw' })

if (!(src in res)) {
  throw new Error(`${src} not found`);
}

const root = parse(res[src].default);
let svg = root.querySelector('svg');
delete svg.attrs.height;
delete svg.attrs.width;
svg.setAttributes({...svg.attrs, ...attributes});

const html = root.toString();
---

<Fragment set:html={html} />