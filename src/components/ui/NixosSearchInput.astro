---
import type { VariantProps } from 'class-variance-authority';

import Button from '@/components/ui/Button.astro';
import Input, { inputVariants } from '@/components/ui/Input.astro';

interface Props extends VariantProps<typeof inputVariants> {
  collection?: 'packages' | 'options';
  withSubmit?: boolean;
  withSubmitClass?: string;
}

const collectionMap = {
  packages: 'Nix packages',
  options: 'NixOS options',
};

const {
  color = 'nix-blue',
  size = 'lg',
  collection = 'packages',
  withSubmit = false,
} = Astro.props;
---

<form
  method="get"
  action={`https://search.nixos.org/${collection}`}
  class:list={[
    {
      'flex w-full flex-col items-stretch justify-center gap-6 md:w-auto md:items-center':
        withSubmit,
    },
  ]}
>
  <Input
    color={color}
    size={size}
    placeholder={`Search for ${collectionMap[collection]}`}
    name="query"
  />
  {
    withSubmit && (
      <Button color="green" size="sm-mobfull" type="submit">
        Search
      </Button>
    )
  }
</form>
