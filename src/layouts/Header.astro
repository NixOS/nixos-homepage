---
import {Icon} from "astro-icon";
import { Image } from 'astro:assets';
import flakeBlue from "../assets/image/flake-blue.svg";
import { getEntry } from 'astro:content';
import Container from "../components/layout/Container.astro";
const headerMenu = await getEntry('menus', 'header');

const navbarItemStyle = "text-center text-nixsemidarkblue md:text-black border-b-transparent hover:border-b-nixlightblue border-b-4 bg-nixlighterblue md:bg-transparent";
---

<header class="bg-white text-black font-light shadow-lg">
    <Container class="flex flex-col md:flex-row justify-between md:items-center">
        <div class="text-4xl font-normal gap-2 flex justify-between md:justify-start items-center my-2">
            <div class="gap-2 flex justify-between md:justify-start items-center">
                <Image class="h-16 w-16" src={flakeBlue} alt="Nix Logo" />
                <span class="visible md:invisible xl:visible">Nix</span>
            </div>
            <div class="bg-nixlightblue block md:hidden p-4 rounded-lg" id="navigation-toggle">
                <span class="bg-white block w-8 h-1 mb-1.5"></span>
                <span class="bg-white block w-8 h-1 mb-1.5"></span>
                <span class="bg-white block w-8 h-1"></span>
            </div>
        </div>
        <div class="pb-4 md:pb-0 flex-col md:flex-row gap-0.5 md:gap-5 hidden md:flex" id="navbar-menu">
            {headerMenu.data.items.map((item) => (
                <a class={`pt-8 pb-6 ${navbarItemStyle}`} href={item.link}>{item.name}</a>
            ))}
            <a target="_blank" rel="noreferrer noopener" class={`pt-8 md:pt-7 pb-6 ${navbarItemStyle}`} href="https://search.nixos.org">
                <Icon alt="Search" class="h-8 text-nixdarkblue hidden md:block" pack="mdi" name="search" />
                <span class="inline-block md:hidden">Search</span>
            </a>
        </div>
    </Container>
</header>

<script lang="ts">
    const navigationToggle= document.getElementById("navigation-toggle");
    const navbarMenu = document.getElementById("navbar-menu");

    navigationToggle.addEventListener("click", () => {
        navbarMenu.classList.toggle("hidden");
        navbarMenu.classList.toggle("flex")
    });
</script>
